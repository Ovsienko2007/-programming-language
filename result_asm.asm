IN
PUSH RAX
PUSH 0  ; number_for_factorial <- 0
ADD
POP  RDX
POP [RDX]
PUSH 131
PUSH RAX
PUSH 1  ; test_var <- 1
ADD
POP  RDX
POP [RDX]
PUSH RAX
PUSH 0
ADD
POP  RBX
PUSH [RBX]
PUSH RAX
PUSH 1
ADD
POP  RBX
PUSH [RBX]
PUSH RAX
PUSH 0
ADD
POP  RBX
PUSH [RBX]

PUSH RAX
PUSH 2
ADD
POP RAX

CALL :0

PUSH RAX
PUSH 2
SUB
POP RAX

OUT
OUT
OUT
NL
JMP :1
:0
PUSH RAX
PUSH 0  ; number_for_factorial <- 0
ADD
POP  RDX
POP [RDX]
PUSH 0
PUSH RAX
PUSH 1  ; var_in_factorial <- 1
ADD
POP  RDX
POP [RDX]
PUSH RAX
PUSH 0
ADD
POP  RBX
PUSH [RBX]
PUSH 1
ISE
PUSH 0
JE :3
PUSH 1
PUSH RAX
PUSH 1  ; var_in_factorial <- 1
ADD
POP  RDX
POP [RDX]
JMP :2
:3
PUSH RAX
PUSH 0
ADD
POP  RBX
PUSH [RBX]
PUSH RAX
PUSH 0
ADD
POP  RBX
PUSH [RBX]
PUSH 1
SUB
PUSH RAX
PUSH 2
ADD
POP RAX
CALL :0
PUSH RAX
PUSH 2
SUB
POP RAX
MUL
PUSH RAX
PUSH 1  ; var_in_factorial <- 1
ADD
POP  RDX
POP [RDX]
:2
PUSH RAX
PUSH 1
ADD
POP  RBX
PUSH [RBX]
OUT
NL
PUSH RAX
PUSH 1
ADD
POP  RBX
PUSH [RBX]
RET
RET
:1
HALT
